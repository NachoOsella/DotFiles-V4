
[opener]
# Fallback del sistema (Linux): útil para binarios, office, etc.
open = [
  { run = 'xdg-open %s', orphan = true, desc = "Abrir (sistema)", for = "linux" },
]

# Editor (bloqueante, interactivo)
edit = [
  { run = 'nvim %s', block = true, desc = "Editar con Neovim", for = "unix" },
]

# Imágenes (tu elección: feh; ojo que es X11, pero lo dejo tal cual)
image = [
  { run = 'feh --geometry 800x600 --scale-down --auto-zoom %s', orphan = true, desc = "Abrir imagen (feh)", for = "unix" },
]

video = [
  { run = 'vlc %s', orphan = true, desc = "Reproducir video (VLC)", for = "unix" },
]

audio = [
  { run = 'vlc %s', orphan = true, desc = "Reproducir audio (VLC)", for = "unix" },
]

pdf = [
  { run = 'zathura %s', orphan = true, desc = "Ver PDF (Zathura)", for = "unix" },
]

extract = [
  { run = '7z x %s', desc = "Extraer aquí (7z)", for = "unix" },
]


[open]
rules = [
  # 1) Formatos especiales primero (prioridad)
  { mime = "application/pdf", use = "pdf" },

  { mime = "image/*", use = "image" },
  { mime = "video/*", use = "video" },
  { mime = "audio/*", use = "audio" },

  # Archivos comprimidos (por extensión)
  { url = "*.7z",     use = "extract" },
  { url = "*.zip",    use = "extract" },
  { url = "*.rar",    use = "extract" },
  { url = "*.tar",    use = "extract" },
  { url = "*.tgz",    use = "extract" },
  { url = "*.tar.gz", use = "extract" },
  { url = "*.tbz2",   use = "extract" },
  { url = "*.tar.bz2",use = "extract" },
  { url = "*.txz",    use = "extract" },
  { url = "*.tar.xz", use = "extract" },

  # 2) TODO texto va a nvim (tu requisito)
  { mime = "text/*", use = "edit" },

  # Extra: mimes "texto" que a veces no caen en text/*
  { mime = "application/json", use = "edit" },
  { mime = "application/xml",  use = "edit" },
  { mime = "application/x-yaml", use = "edit" },

  # Extensiones típicas que suelen ser texto (por si file(1) / mime falla)
  { url = "*.md",   use = "edit" },
  { url = "*.txt",  use = "edit" },
  { url = "*.toml", use = "edit" },
  { url = "*.yaml", use = "edit" },
  { url = "*.yml",  use = "edit" },
  { url = "*.json", use = "edit" },
  { url = "*.xml",  use = "edit" },
  { url = "*.ini",  use = "edit" },
  { url = "*.conf", use = "edit" },
  { url = "*.log",  use = "edit" },
  { url = "*.sh",   use = "edit" },
  { url = "*.py",   use = "edit" },
  { url = "*.rs",   use = "edit" },
  { url = "*.go",   use = "edit" },
  { url = "*.java", use = "edit" },
  { url = "*.kt",   use = "edit" },
  { url = "*.c",    use = "edit" },
  { url = "*.h",    use = "edit" },
  { url = "*.cpp",  use = "edit" },
  { url = "*.hpp",  use = "edit" },

  # 3) Fallback final: si no es texto ni coincide con nada, sistema
  { url = "*", use = "open" },
]


[mgr]
sort_by = "mtime"
sort_reverse = true

